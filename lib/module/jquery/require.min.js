/*!
 * Require v1.2
 * 
 * @author ykiwng
 */
!function(f,c,g){var b=g("head");var d=function(j,l){j=j.replace(/[^\w\$\.]/g,"").replace(/(^|\.)([0-9\.]+|$)/g,"");var k,i=new Function("return ( window."+j+" != null )"),h=function(){if(i()){clearInterval(k);l()}};k=setInterval(h,10)};var a={path:"",abbr:{},assets:{},packages:{},status:{},getStatus:function(h){return this.status[h]>>>0},setStatus:function(i,h){this.status[i]=h},setPackageStatus:function(i,h){if(this.getStatus(i)>=2||h==2&&this.packages[i].length>0){return}this.setStatus(i,h)},setPackage:function(h,i){this.packages[h]=i},_load:function(h){var l=this.packages[h].shift();if(!l){return}if(g.isFunction(l)){this.setStatus(h,l()?2:3);return}var k=this,j=l.replace(/^~(\w*)\//,function(o,n){var m=k.path;g.each(n.split(""),function(p,q){m+=k.abbr[q]||""});return m}),i=(/(\w+)(\?.+)?$/.exec(j)||["",""])[1].toLowerCase();this.setStatus(l,1);if(i=="css"){this.setStatus(l,2);this.setPackageStatus(h,2);this._load(h);c.createStyleSheet?c.createStyleSheet(j):g("<link/>").attr({rel:"stylesheet",href:j}).appendTo(b);return}g.ajax({url:j,async:true,cache:true}).done(function(m){k.setStatus(l,2);k.setPackageStatus(h,2);k._load(h)}).fail(function(){k.setStatus(l,3);k.setPackageStatus(h,3)})},load:function(i){var h=this;g.each(i,function(l,j){if(h.getStatus(j)>=1){return}h.setStatus(j,1);if(g.isArray(j)){var k=String(Math.random());h.assets[k]=j;j=k}var n=h.assets[j],m=function(){h.setStatus(j,2)};switch(true){case !!n:h.setPackage(j,n);h._load(j);return;case !!j.match(/^[\.\w\$]+$/):var o=h.path+j.replace(/\./g,"/")+".js";h.setPackage(j,[o]);h._load(j);return;case (j.indexOf("/")>=0):h.setPackage(j,[j]);h._load(j);return;case (j.indexOf("@")==0):d(j,m);return;case (j=="!ready"):g(c).ready(m);return;case (j=="!load"):g(f).load(m);return;default:h.setStatus(j,2)}})}};var e=function(){return new e.fn.init(arguments)};e.fn=e.prototype={init:function(h){this.assets=h;this.assets_count=h.length;this.done_handler=g.noop;this.fail_handler=g.noop;this.status=0;a.load(h);this._listener();return this},_listener:function(){var i=this,j,h=function(){var k,l=[0,0,0,0];g.each(i.assets,function(n,m){l[a.getStatus(m)]++});k=i.status=l[3]>0?3:l[2]==i.assets_count?2:1;if(k>=2){clearInterval(j);k==2?i.done_handler():i.fail_handler()}};j=setInterval(h,10)},_attach:function(h,i){if(!g.isFunction(i)){return}this[h==2?"done_handler":"fail_handler"]=i;this.status==h&&i()},done:function(h){this._attach(2,h);return this},fail:function(h){this._attach(3,h);return this},status:function(){return this.status}};e.fn.init.prototype=e.fn;g.extend(e,{path:function(h){return a.path+(h||"")},define:function(h){g.isPlainObject(h)&&g.extend(a.assets,h);return a.assets},setPath:function(i,h){if(i&&typeof i=="string"){a.path=i}g.isPlainObject(h)&&g.extend(a.abbr,h);return a.path},status:function(){return a.status},ready:function(h){g(c).ready(h)},load:function(h){g(f).load(h)}});f.require=e}(window,document,jQuery);